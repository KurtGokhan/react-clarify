"use strict";(self.webpackChunkreact_clarify_website=self.webpackChunkreact_clarify_website||[]).push([[308],{4578:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>O,contentTitle:()=>V,default:()=>M,frontMatter:()=>S,metadata:()=>N,toc:()=>D});var r=t(2540),a=t(3023),o=t(8296),l=t(2491),c=t(3696),i={exports:{}},s={},u=c,d=Symbol.for("react.element"),f=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,p=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b={key:!0,ref:!0,__self:!0,__source:!0};function g(e,n,t){var r,a={},o=null,l=null;for(r in void 0!==t&&(o=""+t),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(l=n.ref),n)h.call(n,r)&&!b.hasOwnProperty(r)&&(a[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===a[r]&&(a[r]=n[r]);return{$$typeof:d,type:e,key:o,ref:l,props:a,_owner:p.current}}s.Fragment=f,s.jsx=g,s.jsxs=g,i.exports=s;var m=i.exports;const v=typeof window<"u"?c.useLayoutEffect:c.useEffect;function k(e){const n=(0,c.useRef)(e);return v((()=>{n.current=e}),[e]),n}function x(e){const n=k(e);return(0,c.useCallback)((function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return null==(e=n.current)?void 0:e.call(n,...r)}),[n])}function y(e,n){"function"==typeof e?e(n):e&&(e.current=n)}function j(e){return{TrackEvent:function(n){let{refProp:t="ref",event:r,eventOptions:a,name:o,disabled:l,stopPropagation:i,preventDefault:s,...u}=n;const{content:d,result:{track:f}}=e(u),h=c.Children.only(d);if(!h)throw new Error("Children passed to track directive must be an element with ref");const p=o??r,b=(0,c.useCallback)((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];f({args:[p,e,...t],data:{}}),i&&e.stopPropagation(),s&&e.preventDefault()}),[f,i,s,p]),g=(0,c.useRef)(),m=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const r=(0,c.useRef)([]);return(0,c.useCallback)((e=>{let t=0;for(;t<n.length;t++){const a=n[t],o=r.current[t];o!=a&&y(o,null),y(a,e)}for(;t<r.current.length;t++)y(r.current[t],null);r.current=n}),n)}((0,c.useCallback)((e=>{var n;null==(n=g.current)||n.call(g),g.current=void 0,!l&&"function"==typeof(null==e?void 0:e.addEventListener)&&(e.addEventListener(r,b,a),g.current=()=>e.removeEventListener(r,b,a))}),[r,b,l,a]),h[t]);return(0,c.cloneElement)(h,{...h.props,[t]:m})}}}const{TrackingProvider:w,useTrackingContext:T,TrackingHandler:C,ConsoleTrackingHandler:E,useTrack:I,useTrackingHandler:_,TrackCallback:P,TrackEvent:A}=function(){const e=(0,c.createContext)({enabled:!0,data:{}}),n=(0,c.createContext)({handle:()=>{}}),{useTrack:t,TrackingHandler:r,ConsoleTrackingHandler:a}=function(e,n){function t(e){let{children:t,...r}=e;const a=k(r),o=x((0,c.useContext)(n).handle),l=(0,c.useMemo)((()=>({handle(e){var n,t;a.current.skip||null==(t=(n=a.current).onHandle)||t.call(n,e),a.current.root||o(e)}})),[o,a]);return m.jsx(n.Provider,{value:l,children:t})}return{TrackingHandler:t,ConsoleTrackingHandler:function(e){let{message:n,level:r="log",transform:a,...o}=e;const l=x((e=>{console[r](n||"Tracked","function"==typeof a?a(e):e)}));return m.jsx(t,{...o,onHandle:l})},useTrack:function(t){let{data:r}=void 0===t?{}:t;const a=(0,c.useContext)(n).handle,o=(0,c.useContext)(e);return x((e=>{o.enabled&&a({...e,data:{...o.data,...r,...null==e?void 0:e.data}})}))}}}(e,n),{TrackingProvider:o,useResolvedTracking:l}=function(e,n){function t(t){let{children:r,enabled:a,skip:o,root:l,data:i}=t;const s=(0,c.useContext)(e),u=("function"==typeof l?l(s.data):l)?{}:s.data,d="function"==typeof i?i(s.data):{...u,...i},f=("function"==typeof o?o(d):o)?u:d,h=k(f),p="function"==typeof a?a(f):a,b="boolean"==typeof p?p:s.enabled,g=n(),m=x((e=>{let{args:n,data:t}=e;return g({data:{...f,...t},args:n})})),v=(0,c.useMemo)((()=>({track:m,enabled:b,get data(){return h.current}})),[b,h,m]);return{result:v,content:"function"==typeof r?r(v):r}}return{TrackingProvider:(0,c.forwardRef)((function(n,r){const{result:a,content:o}=t(n);return(0,c.useImperativeHandle)(r,(()=>a),[a]),m.jsx(e.Provider,{value:a,children:o})})),useResolvedTracking:t}}(e,t),{TrackCallback:i}=function(e){return{TrackCallback:function(n){let{callback:t,name:r,disabled:a,...o}=n;if(!t)throw new Error("Callback name must be provided");const{content:l,result:{track:i}}=e(o),s=c.Children.only(l);if(!s)throw new Error("Children passed to track directive must be an element with ref");const u=r??String(t),d=s.props[t],f=(0,c.useCallback)((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return i({args:[u,...n],data:{}}),null==d?void 0:d(n)}),[d,i,u]);return(0,c.cloneElement)(s,{...s.props,[t]:f})}}}(l),{TrackEvent:s}=j(l);return{TrackingProvider:o,useTrackingContext:()=>(0,c.useContext)(e),useTrackingHandler:()=>(0,c.useContext)(n),useTrack:t,TrackingHandler:r,ConsoleTrackingHandler:a,TrackCallback:i,TrackEvent:s}}();function R(){return(0,r.jsx)(w,{data:{user:{name:"johndoe",id:"123456"},company:"acme"},children:(0,r.jsx)(E,{level:"info",transform:JSON.stringify,children:(0,r.jsxs)(w,{data:{page:"Home Page"},children:[(0,r.jsx)("p",{children:"Clicking the button will log a message to the console and send a tracking event."}),(0,r.jsx)(A,{event:"click",data:{element:"My button"},children:(0,r.jsx)("button",{type:"button",children:"Click me"})})]})})})}const H="import React from 'react';\nimport { ConsoleTrackingHandler, TrackEvent, TrackingProvider } from 'react-clarify';\n\nexport default function Example() {\n  return (\n    <TrackingProvider data={{ user: { name: 'johndoe', id: '123456' }, company: 'acme' }}>\n      <ConsoleTrackingHandler level=\"info\" transform={JSON.stringify}>\n        <TrackingProvider data={{ page: 'Home Page' }}>\n          <p>Clicking the button will log a message to the console and send a tracking event.</p>\n\n          <TrackEvent event=\"click\" data={{ element: 'My button' }}>\n            <button type=\"button\">Click me</button>\n          </TrackEvent>\n        </TrackingProvider>\n      </ConsoleTrackingHandler>\n    </TrackingProvider>\n  );\n}\n",S={sidebar_position:1,title:"Introduction"},V="React Clarify",N={id:"index",title:"Introduction",description:"React Clarify is a library that allows you to instrument your React components for declarative user tracking and analytics.",source:"@site/docs/index.mdx",sourceDirName:".",slug:"/",permalink:"/react-clarify/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Introduction"},sidebar:"tutorialSidebar",next:{title:"Usage with JSX Middlewares",permalink:"/react-clarify/usage-with-jsx-middlewares"}},O={},D=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2}];function L(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{BrowserWindow:t,CodeBlock:c}=n;return t||q("BrowserWindow",!0),c||q("CodeBlock",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"react-clarify",children:"React Clarify"})}),"\n",(0,r.jsx)(n.p,{children:"React Clarify is a library that allows you to instrument your React components for declarative user tracking and analytics."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(o.A,{groupId:"npm2yarn",children:[(0,r.jsx)(l.A,{value:"npm",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install react-clarify\n"})})}),(0,r.jsx)(l.A,{value:"yarn",label:"Yarn",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"yarn add react-clarify\n"})})}),(0,r.jsx)(l.A,{value:"pnpm",label:"pnpm",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm add react-clarify\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.p,{children:"React Clarify works by defining the tracking context in a cascading manner. Let's see with an example:"}),"\n",(0,r.jsx)(c,{language:"jsx",children:H}),"\n",(0,r.jsx)(n.p,{children:"In summary, there are 3 group of components you need to know about:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TrackingProvider"})," is a context provider for defining the data that will be passed to the tracking handler. data for the nested ",(0,r.jsx)(n.code,{children:"TrackingProvider"})," will be merged together."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TrackingHandler"})," is for defining a callback function that will be called when a tracking event is fired. ",(0,r.jsx)(n.code,{children:"ConsoleTrackingHandler"})," is a predefined handler for simply logging the tracked data to the console. Handlers can be nested to call them all when a tacking event occurs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TrackEvent"})," and is used to fire a tracking event when a DOM event occurs. It's children must be a single React component that takes a ref.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["As an alternative to ",(0,r.jsx)(n.code,{children:"TrackEvent"}),", ",(0,r.jsx)(n.code,{children:"TrackCallback"})," can be used to fire tracking events using not just DOM events, but any arbitrary callback function. It can be used like ",(0,r.jsx)(n.code,{children:'<TrackCallback callback="onClick">'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useTrack"})," hook can be used to get a function that can be used to fire a tracking event that can be called manually."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Let's see the result of the example above:"}),"\n",(0,r.jsx)(t,{children:(0,r.jsx)(R,{})})]})}function M(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(L,{...e})}):L(e)}function q(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},2491:(e,n,t)=>{t.d(n,{A:()=>l});t(3696);var r=t(1750);const a={tabItem:"tabItem_wHwb"};var o=t(2540);function l(e){let{children:n,hidden:t,className:l}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,l),hidden:t,children:n})}},8296:(e,n,t)=>{t.d(n,{A:()=>j});var r=t(3696),a=t(1750),o=t(766),l=t(9519),c=t(4395),i=t(5043),s=t(4544),u=t(4243);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function f(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:a}}=e;return{value:n,label:t,attributes:r,default:a}}))}(t);return function(e){const n=(0,s.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,i.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(a.location.search);n.set(o,e),a.replace({...a.location,search:n.toString()})}),[o,a])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=f(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:o}))),[s,d]=p({queryString:t,groupId:a}),[b,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,o]=(0,u.Dv)(t);return[a,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),m=(()=>{const e=s??b;return h({value:e,tabValues:o})?e:null})();(0,c.A)((()=>{m&&i(m)}),[m]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),g(e)}),[d,g,o]),tabValues:o}}var g=t(6681);const m={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var v=t(2540);function k(e){let{className:n,block:t,selectedValue:r,selectValue:l,tabValues:c}=e;const i=[],{blockElementScrollPositionUntilNextRender:s}=(0,o.a_)(),u=e=>{const n=e.currentTarget,t=i.indexOf(n),a=c[t].value;a!==r&&(s(n),l(a))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=i.indexOf(e.currentTarget)+1;n=i[t]??i[0];break}case"ArrowLeft":{const t=i.indexOf(e.currentTarget)-1;n=i[t]??i[i.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:c.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>i.push(e),onKeyDown:d,onClick:u,...o,className:(0,a.A)("tabs__item",m.tabItem,o?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function x(e){let{lazy:n,children:t,selectedValue:o}=e;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==o})))})}function y(e){const n=b(e);return(0,v.jsxs)("div",{className:(0,a.A)("tabs-container",m.tabList),children:[(0,v.jsx)(k,{...n,...e}),(0,v.jsx)(x,{...n,...e})]})}function j(e){const n=(0,g.A)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(n))}},3023:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var r=t(3696);const a={},o=r.createContext(a);function l(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);